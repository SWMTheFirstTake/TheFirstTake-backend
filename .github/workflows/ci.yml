jobs:
  build-and-test:
    runs-on: ubuntu-latest

    env:
      POSTGRES_USER: ${{ secrets.POSTGRES_USER }}
      POSTGRES_PASSWORD: ${{ secrets.POSTGRES_PASSWORD }}
      LLM_SERVER_HOST: ${{ secrets.LLM_SERVER_HOST }}
      LLM_SERVER_PORT: ${{ secrets.LLM_SERVER_PORT }}
      REDIS_ENDPOINT: ${{ secrets.REDIS_ENDPOINT }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up JDK 21
        uses: actions/setup-java@v3
        with:
          java-version: '21'
          distribution: 'temurin'

      - name: Grant execute permission for gradlew
        run: chmod +x ./thefirsttake/gradlew

      - name: Build and test
        run: cd thefirsttake && ./gradlew clean build

# name: Spring Boot CI

# on:
#   push:
#     branches:
#       - main
#   pull_request:
#     branches:
#       - main

# jobs:
#   build-and-test:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3

#       - name: Set up JDK 21
#         uses: actions/setup-java@v3
#         with:
#           java-version: '21'
#           distribution: 'temurin'

#       - name: Grant execute permission for gradlew
#         run: chmod +x ./thefirsttake/gradlew

#       - name: Build and test
#         run: cd thefirsttake && ./gradlew clean build
